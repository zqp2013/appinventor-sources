<!DOCTYPE html>
<html lang="zh_CN"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <link href="/static/css/fonts.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/static/css/mit_app_inventor.css">
    <script type="text/javascript">
     <!--//--><![CDATA[// ><!--

                                   var gotoappinventor = function() {
                                       var referrer = document.location.pathname;
                                       var patt = /.*hour-of-code.*/;
                                       if (referrer.match(patt)) {
                                           window.open("http://code.appinventor.mit.edu/", "new");
                                       } else {
                                           window.open("http://www.fun123.cn/", "new");
                                       }
                                   }
     //--><!]]>
    </script>
    <title>Using the Location Sensor</title>
    <meta name="keywords" content="AppInventor,App Inventor,App Inventor 2,App Inventor 2 中文网,ai2,少儿编程,青少年编程,编程,开心哆来咪编程网">
	<meta name="description" content="App Inventor 2 中文网，专注青少年编程。">
	<meta name="application-name" content="App Inventor 2 中文网"/></head>
<body class="mit_app_inventor"><nav class="navbar navbar-expand-xl navbar-light">
    <a class="navbar-brand" href="http://fun123.cn/reference/">
	<img src="/static/images/logo2.png" alt="Logo">
    </a>
    <button type="button" class="btn create-btn" style="margin-right: 20px;" onclick="gotoappinventor();">创建 Apps</button>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent"
            aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle Navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarContent">
	<ul class="navbar-nav" style="margin-left: auto;">
	    <li class="nav-item dropdown">
		<a class="nav-link" href="http://www.fun123.cn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		    关于我们
		</a>
		<div class="dropdown-menu">
		    <a class="dropdown-item" href="http://www.fun123.cn/about-us">关于我们</a>
			<a class="dropdown-item" href="http://www.fun123.cn/ReleaseNotes">发布日志</a>
			<a class="dropdown-item" href="http://fun123.cn/about/termsofservice" target="_blank">服务条款</a>
		</div>
	    </li>
	    <li class="nav-item dropdown">
		<a class="nav-link" href="http://www.fun123.cn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		    教育
		</a>
		<div class="dropdown-menu">
		    <a class="dropdown-item" href="https://bbs.tsingfun.com/forum-147-1.html" target="_blank">论坛</a>
		    <a class="dropdown-item" href="http://www.fun123.cn/reference/tutorials">教程</a>
		</div>
	    </li>
	    <li class="nav-item dropdown">
		<a class="nav-link" href="http://www.fun123.cn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		    资源
		</a>
		<div class="dropdown-menu">
			<a class="dropdown-item" href="http://fun123.cn/reference/info/">开始</a>
		    <a class="dropdown-item" href="http://appinventor.mit.edu/explore/books">App Inventor书籍</a>
		</div>
	    </li>
		<li class="nav-item dropdown">
		<a class="nav-link" href="http://www.fun123.cn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			反馈
		</a>
		<div class="dropdown-menu">
			<a class="dropdown-item" href="https://bbs.tsingfun.com/forum.php?mod=forumdisplay&fid=147&filter=typeid&typeid=63" target="_blank">我要反馈</a>
		</div>
		</li>
    </ul>
        <div style="display: inline-flex;margin-left:auto;margin-right:0">
				<script>
					var _hmt = _hmt || [];
					(function() {
					  var hm = document.createElement("script");
					  hm.src = "https://hm.baidu.com/hm.js?8d287b854d737bdc880e8ddeac1b309d";
					  var s = document.getElementsByTagName("script")[0]; 
					  s.parentNode.insertBefore(hm, s);
					})();
				</script>
        </div>
	<!-- <form class="form-inline" action="/action_page.php">
	     <div class="form-group has-search">
	     <span class="fa fa-search form-control-feedback"></span>
	     <input type="text" class="form-control" placeholder="Search">
	     </div>
	     </form> -->
    </div>
	<div class="collapse navbar-collapse">
		<img src="/static/images/hello.png" alt="你好">
	</div>
</nav>
<div class="default-page">
            <div class="header">
	        <h1 class="font-weight-bold text-center offset-xl-2 col-xl-8">Using the Location Sensor</h1>
            </div>
            <div class="container-fluid">
                <article class="documentation">
<p><em>This tutorial was developed by <a href="http://appinventorblog.com/">Professor David Wolber</a> at The University of San Francisco.</em></p>

<p>The LocationSensor component can determine the phone’s latitude and longitude as well as a street address. You can use it to share your location with others, record “breadcrumbs” on a journey or treasure hunt, or as a way to take roll in class (as long as the students have Android devices!)</p>

<p>The sample apps below are simple but illustrate the basic way that location can be determined. Both apps report the current latitude, longitude, and addres on the phone’s display and, just for fun, speak the address aloud. The first app reports the location as soon as the sensor gets the data and every time the phone’s location is changed. The second app only invokes the location sensor in response to an event– when the user clicks a button.</p>

<p>For each sample app, the following is provided:</p>

<ul>
  <li>A barcode which can be scanned to <strong>install</strong> the app on your phone.</li>
  <li>The source (blocks) for you to use/<strong>customize</strong>. Download the file to your computer then upload it into App Inventor.</li>
  <li>A snapshot of the app in the Component <strong>Designer</strong>.</li>
  <li><strong>Annotated blocks</strong> to help you undertstand the app. The annotations are block comments that will appear in the app when you upload it as well.</li>
</ul>

<h2 id="sample-app-1-location-reader">Sample App 1: Location Reader</h2>

<p>Report location data as soon as sensor reads it and when the location changes</p>

<p><strong>TRY IT!</strong> Scan the QR code with your Android phone to install this app (if you haven’t already, download a scanner from the Google Play Store)	.</p>

<p><img src="LocationSensorAssets/locationBarcode.png" alt="Barcode" /></p>

<table>
  <tbody>
    <tr>
      <td><strong>CUSTOMIZE IT!</strong> Download the source blocks to your phone by clicking the button on below, then upload into App Inventor by choosing More Actions</td>
      <td>Upload Source on the Projects page.</td>
    </tr>
  </tbody>
</table>

<p><a href="LocationSensorAssets/LocationTest.zip"><img src="LocationSensorAssets/customize.png" alt="Download" /></a></p>

<p><strong>UNDERSTAND IT!</strong> Here is the user interface and components for the app:</p>

<p><img src="LocationSensorAssets/designer.png" alt="App design view" /></p>

<p>Here are the blocks for the app, with annotation:</p>

<p><img src="LocationSensorAssets/locationChangedBlocks.png" alt="App blocks" /></p>

<h2 id="sample-app-2-get-the-location-when-a-button-is-clicked">Sample App 2: Get the location when a button is clicked</h2>

<p>This app illustrates how to access location information only when some event occurs. The LocationSensor is disabled to begin, then enabled when the button is clicked and disabled once again when the location is determined.</p>

<p><strong>TRY IT!</strong> Scan the QR code with your Android phone to install this app (if you haven’t already, download a scanner from the Google Play Store)</p>

<p><img src="LocationSensorAssets/locationOnclickBarcode.png" alt="Barcode" /></p>

<table>
  <tbody>
    <tr>
      <td><strong>CUSTOMIZE IT!</strong> Download the source blocks to your phone by clicking the button below, then upload into App Inventor by choosing More Actions</td>
      <td>Upload Source on the Projects page.</td>
    </tr>
  </tbody>
</table>

<p><a href="LocationSensorAssets/LocationOnClickTest.zip"><img src="LocationSensorAssets/customize.png" alt="Download" /></a></p>

<p><strong>UNDERSTAND IT!</strong> Here is the user interface and components for the app:</p>

<p><img src="LocationSensorAssets/locationOnClickDesigner.png" alt="App design view" /></p>

<p>Here are the blocks for the app, with annotation:</p>

<p><img src="LocationSensorAssets/locationOnClickBlocks.png" alt="App blocks" /></p>

<h2 id="variations">Variations</h2>

<ul>
  <li>The second app illustrates using location data in response to an event. Write an app that responds to any received text by sending back a text that says, “I’m driving right now, I’ll get back to you later. My location is …” with the current location filled in.</li>
  <li>Write a “breadcrumb” app that tracks your (phone’s) whereabouts by recording each location change. One interesting refinement would be to only record a new “breadcrumb” if the location has changed by a certain amount.</li>
</ul>

</article>
<script>
  // Handle redirection to documentation based on locale query parameter (if specified)
  (function() {
      var locale = window.location.search.match('[&?]locale=([a-zA-Z-]*)');
      if (locale) {
          if (locale[1].indexOf('en') === 0) {
              // English needs to stay at the top level to not break existing links
              var page = window.location.pathname.split('/');
              if (page.length === 5) {
                  page.splice(2, 1);
              } else {
                  // already on english
                  return;
              }
              window.location.href = page.join('/');
          } else {
              var page = window.location.pathname.split('/');
              if (page.length === 4) {
                  page.splice(2, 0, locale[1]);
              } else if (page[2].toLowerCase() != locale[1].toLowerCase()) {
                  page[2] = locale[1];
              } else {
                  return;  // already on the desired language
              }
              // Test that the page exists before redirecting.
              var xhr = new XMLHttpRequest();
              xhr.open('HEAD', page.join('/'), false);
              xhr.onreadystatechange = function() {
                  if (xhr.readyState == 4) {
                      if ((xhr.status == 200 || xhr.status == 204)) {
                          window.location.href = page.join('/');
                      } else if (xhr.status  >= 400) {
                          page.splice(2, 1);  // go to english version
                          window.location.href = page.join('/');
                      }
                  }
              };
              xhr.send();
          }
      }
  })();

  // Handle embedded documentation in help by removing website template
  if (window.self !== window.top) {
      setTimeout(function() {
          var videos = document.querySelectorAll('video');
          for (var i = 0; i < videos.length; i++) {
              if (parseInt(videos[i].getAttribute('width')) > 360) {
                  var aspect = parseInt(videos[i].getAttribute('height')) / parseInt(videos[i].getAttribute('width'));
                  videos[i].setAttribute('width', '360');
                  videos[i].setAttribute('height', '' + (360 * aspect));
              }
          }
          var h1 = document.querySelector('h1');
          var article = document.querySelector('article');
          article.insertBefore(h1, article.firstElementChild);
          document.body.innerHTML = article.outerHTML;
      });
  }
</script>

            </div>
            <div class="footer background-green">
    <div class="row container">
	<div class="col-xl-3">
	    <h4>App Inventor 2 中文网</h4>
	    <!-- <form class="form-inline" action="/action_page.php">
		 <div class="form-group has-search">
		 <span class="fa fa-search form-control-feedback"></span>
		 <input type="text" class="form-control" placeholder="Search">
		 </div>
		 </form> -->
	</div>
	<div class="col-xl-6 legal text-center">
	    <ul>
		<li>
		    <a href="http://www.fun123.cn" class="btn btn-link" role="button" target="_blank">© 2023 fun123.cn</a>
		</li>
		<li>
		    <a href="http://creativecommons.org/licenses/by-sa/3.0/"
                       target="_blank" class="btn btn-link" role="button">本作品遵从 Creative Commons Attribution-ShareAlike 3.0 许可协议</a>
		</li>
		<li>
		    <a href="http://fun123.cn/about/termsofservice"
                       target="_blank" class="btn btn-link" role="button">隐私策略和使用条款</a>
		</li>
	    </ul>
	</div>
	<div class="col-xl-3 links">
		<a href="https://bbs.tsingfun.com/forum-147-1.html" target="_blank">技术支持</a>
        </div>
    </div>
</div>
<script src="/static/js/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="/static/js/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="/static/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script async src="/static/js/widgets.js" charset="utf-8"></script>
</div>
    </body>
</html>
